# 提取流程 - 阶段字典

## 默认返回格式

```json
{
  "card_type": "Place Holder",
  "card_message":"Place Holder",
  "content": "模型回复内容"
}
```

## 全局属性字典

| 用户属性 | **描述** | **数据类型** | **workflow需调用接口** | **workflow需返回话术** |
| --- | --- | --- | --- | --- |
| auth | 用户是否授权 | boolean | 用户授权状态API |  |
|  | 用户未授权 |  |  | ```json<br>{<br>  "card_type": "user_unauth", <br>  "card_message": "用户未授权，需要进行授权"<br>}<br>``` |
|  | 用户已授权 |  |  |  |
|  | 查询公积金账户 |  | 公积金账户查询API |  |
|  | 查询成功 |  |  | ```json<br>{<br>  "card_type": "account_info", <br>  "card_message": "查询到的公积金账户信息json"<br>}<br>``` |

## 租房提取

| 编号 | **阶段** | **描述** | **workflow需调用接口** | **workflow需返回话术** |
| --- | --- | --- | --- | --- |
| 1000 | 未开始 |  |  |  |
| 1010 | 开始办理，提取前校验 |  | 提取前校验API |  |
| 1011 | 提取前校验不通过 |  |  | ```json<br>{<br>  "card_type": "fail", <br>  "card_message": "抱歉，校验不通过，由于xxx（不通过原因），暂无法提取公积金"<br>}<br>``` |
| 1012 | 提取前校验通过 |  |  |  |
| 1020 | 检验是否选择公积金类型 |  |  |  |
| 1021 | 未选择公积金提取类型 |  | 可提取公积金类型列表API+近期提取列表API | ```json<br>{<br>  "card_type": "pf_list", <br>  "card_message": "请选择要提取的公积金类型",<br>  "pf_list": [<br>    {<br>      "pf_id":"公积金类型id",<br>      "pf_name":"公积金类型名称"<br>    }<br>  ]<br>}<br>``` |
| 1022 | 已选择公积金提取类型 |  |  |  |
| 1030 | 检验账户状态 |  | 账户状态判断API |  |
| 1031 | 账户状态异常 |  |  | ```json<br>{<br>  "card_type": "fail", <br>  "card_message": "抱歉，您的公积金账户已冻结（或已消户），暂无法提取公积金。"<br>}<br>``` |
| 1032 | 账户状态正常 |  |  |  |
| 1040 | 检验缴存提取情况 |  | 缴存提取情况判断API |  |
| 1041 | 提取情况不满足 |  |  | ```json<br>{<br>  "card_type": "fail", <br>  "card_message": "抱歉，（不满足原因），暂无法提取公积金。"<br>}<br>``` |
| 1042 | 提取情况满足 |  |  |  |
| 1050 | 检验缴存地有无房产 |  | 缴存地有无房产API |  |
| 1051 | 有房产 |  |  | ```json<br>{<br>  "card_type": "fail", <br>  "card_message": "抱歉，（不满足原因），暂无法办理租房提取。"<br>}<br>``` |
| 1052 | 无房产 |  |  |  |
| 1060 | 检验婚姻状态 |  | 婚姻状态API |  |
| 1061 | 已婚 | 1070 |  |  |
| 1062 | 未婚 | 1120 |  |  |
| 1070 | 检验配偶手机签约状态 |  | 配偶手机签约状态API |  |
| 1071 | 配偶手机未签约 |  |  | ```json<br>{<br>  "card_type": "mate_sms", <br>  "card_message": "配偶手机号未签约，请先让配偶完成手机号签约。"<br>}<br>``` |
| 1072 | 配偶手机已签约 |  |  |  |
| 1080 | 检验配偶授权状态 |  | 检验配偶授权状态API |  |
| 1081 | 配偶未授权 |  |  | ```json<br>{<br>  "card_type": "mate_sign", <br>  "card_message": "请点击配偶授权卡片完成授权"<br>}<br>``` |
| 1082 | 配偶已授权 |  |  |  |
| 1090 | 检验配偶缴存地有无房产 |  | 配偶缴存地有无房产API |  |
| 1091 | 配偶有房产 |  |  | ```json<br>{<br>  "card_type": "fail", <br>  "card_message": "您的配偶在缴存地有房产，不符合租房提取条件"<br>}<br>``` |
| 1092 | 配偶无房产 |  |  |  |
| 1100 | 检验配偶有无贷款逾期 |  | 配偶有无贷款逾期API |  |
| 1101 | 配偶有逾期 |  |  | ```json<br>{<br>  "card_type": "fail", <br>  "card_message": "您的配偶有贷款逾期，暂时无法办理提取"<br>}<br>``` |
| 1102 | 配偶无逾期 |  |  |  |
| 1110 | 获取多孩家庭提示语 |  | 多孩家庭API | ```json<br>{<br>  "card_type": "children_select", <br>  "card_message": "多孩家庭提示语"<br>}<br>``` |
| 1120 | 检验本人手机签约状态 |  | 本人手机签约状态API |  |
| 1121 | 本人手机未签约 |  |  | ```json<br>{<br>  "card_type": "sms_sign", <br>  "card_message": "请点击手机号签约卡片完成签约"<br>}<br>``` |
| 1122 | 本人手机已签约 |  |  |  |
| 1130 | 检验本人银行卡签约状态 |  | 本人银行卡签约状态API |  |
| 1131 | 本人银行卡未签约 |  |  | ```json<br>{<br>  "card_type": "bank_sign", <br>  "card_message": "请点击银行卡签约卡片完成签约"<br>}<br>``` |
| 1132 | 本人银行卡已签约 |  | 可提取公积金信息API | ```json<br>{<br>  "card_type": "finish", <br>  "card_message": "满足提取条件，展示可提取信息"<br>}<br>``` |
| 1140 | 提取成功，展示提取纪录 |  | 提取纪录API | ```json<br>{<br>  "card_type": "history_list", <br>  "card_message": "提取成功，展示已提取信息"<br>}<br>``` |
| 40000 | 失败或异常状态 | 所有请求超时和失败进入 |  | ```json<br>{<br>  "card_type": "error", <br>  "card_message": "抱歉，服务响应超时，存在异常。请您稍后重试"<br>}<br>``` |